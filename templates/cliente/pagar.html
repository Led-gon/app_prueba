{% extends 'cliente/base.html' %}
{% load static %}

{% block titulo %}
Shatalito - Revisar Pedido y Pagar
{% endblock %}

{% block Subtitulo %}Shatalito - Revisar Pedido y Pagar{% endblock %}

{% block contenido %}

    <main class="pagar-principal">
        <section id="resumen-pedido">
            <h2>Detalles del Pedido</h2>
            <ul id="lista-items-pedido">
                </ul>
            <p class="total">Total a Pagar: $<span id="total-pagar">0.00</span></p>
        </section>

        <section class="datos-pago">
            <h2>Datos de Contacto</h2>
            <form id="formulario-pago" action="/pedido_pagado/" method="get">
                <div>
                    <label for="nombre">Nombre:</label>
                    <input type="text" id="nombre" placeholder="Ingrese el nombre como aparece en la tarjeta" required>
                </div>
                <div>
                    <label for="email">Direccion de correo electronico:</label>
                    <input type="email" id="email" placeholder="Ingrese la direccion de correo electronico" required>

                    <button id="btn-pagar" class="button">Pagar con Mercado Pago</button>
                </div>

            </form>
        </section>

    </main>

    <!-- Modal de confirmación de pago -->
    <div id="modal-confirmacion-pago" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.5); z-index:1000; align-items:center; justify-content:center;">
      <div style="background:#fff; padding:2em; border-radius:8px; max-width:350px; margin:auto; text-align:center;">
        <h3>¿Confirmar pago?</h3>
        <p>¿Deseas realizar el pago y registrar el pedido?</p>
        <button id="btn-confirmar-pago" class="button" style="margin-right:10px;">Sí, pagar</button>
        <button id="btn-cancelar-pago" class="button" style="background:#ccc; color:#222;">Cancelar</button>
      </div>
    </div>

    <div id="walletBrick_container"></div>

    <script>
        const mp = new MercadoPago("YOUR_PUBLIC_KEY", {
            locale: "es-AR"
        });

        mp.checkout({
            preference: {
                id: "YOUR_PREFERENCE_ID"
            },
            render: {
                container: "#walletBrick_container",
                label: "Pagar con Mercado Pago"
            }
        });
    </script>

{% endblock %}